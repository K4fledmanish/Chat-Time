{"version":3,"sources":["../../src/commands/diagnostics.ts"],"names":["packageJSON","require","getEnvironmentInfoAsync","envinfo","run","System","Binaries","IDEs","Managers","SDKs","npmPackages","npmGlobalPackages","yaml","title","version","actionAsync","projectRoot","info","workflow","process","cwd","lines","split","pop","push","join","program","command","description","helpGroup","asyncAction"],"mappings":";;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;AAEA,MAAMA,WAAW,GAAGC,OAAO,CAAC,oBAAD,CAA3B;;AAEA,SAASC,uBAAT,GAAoD;AAClD,SAAOC,mBAAQC,GAAR,CACL;AACEC,IAAAA,MAAM,EAAE,CAAC,IAAD,EAAO,OAAP,CADV;AAEEC,IAAAA,QAAQ,EAAE,CAAC,MAAD,EAAS,MAAT,EAAiB,KAAjB,EAAwB,UAAxB,CAFZ;AAGEC,IAAAA,IAAI,EAAE,CAAC,OAAD,EAAU,gBAAV,CAHR;AAIEC,IAAAA,QAAQ,EAAE,CAAC,WAAD,CAJZ;AAKEC,IAAAA,IAAI,EAAE,CAAC,SAAD,EAAY,aAAZ,CALR;AAMEC,IAAAA,WAAW,EAAE,CACX,MADW,EAEX,OAFW,EAGX,WAHW,EAIX,cAJW,EAKX,kBALW,EAMX,kBANW,EAOX,sBAPW,CANf;AAeEC,IAAAA,iBAAiB,EAAE,CAAC,UAAD;AAfrB,GADK,EAkBL;AACEC,IAAAA,IAAI,EAAE,IADR;AAEEC,IAAAA,KAAK,EAAG,YAAWb,WAAW,CAACc,OAAQ;AAFzC,GAlBK,CAAP;AAuBD;;AAED,eAAeC,WAAf,CAA2BC,WAA3B,EAA+D;AAC7D,QAAMC,IAAI,GAAG,MAAMf,uBAAuB,EAA1C;AACA,QAAMgB,QAAQ,GAAG,gCAAiBF,WAAjB,aAAiBA,WAAjB,cAAiBA,WAAjB,GAAgCG,OAAO,CAACC,GAAR,EAAhC,CAAjB;AACA,QAAMC,KAAK,GAAGJ,IAAI,CAACK,KAAL,CAAW,IAAX,CAAd;AACAD,EAAAA,KAAK,CAACE,GAAN;AACAF,EAAAA,KAAK,CAACG,IAAN,CAAY,sBAAqBN,QAAS,EAA1C;AACA,sBAAIG,KAAK,CAACI,IAAN,CAAW,IAAX,IAAmB,IAAvB;AACD;;AAEc,kBAAUC,OAAV,EAA4B;AACzCA,EAAAA,OAAO,CACJC,OADH,CACW,oBADX,EAEGC,WAFH,CAEe,qCAFf,EAGGC,SAHH,CAGa,MAHb,EAIGC,WAJH,CAIef,WAJf;AAKD","sourcesContent":["import { getDefaultTarget } from '@expo/config';\nimport { Command } from 'commander';\nimport envinfo from 'envinfo';\n\nimport log from '../log';\n\nconst packageJSON = require('../../package.json');\n\nfunction getEnvironmentInfoAsync(): Promise<string> {\n  return envinfo.run(\n    {\n      System: ['OS', 'Shell'],\n      Binaries: ['Node', 'Yarn', 'npm', 'Watchman'],\n      IDEs: ['Xcode', 'Android Studio'],\n      Managers: ['CocoaPods'],\n      SDKs: ['iOS SDK', 'Android SDK'],\n      npmPackages: [\n        'expo',\n        'react',\n        'react-dom',\n        'react-native',\n        'react-native-web',\n        'react-navigation',\n        '@expo/webpack-config',\n      ],\n      npmGlobalPackages: ['expo-cli'],\n    },\n    {\n      yaml: true,\n      title: `Expo CLI ${packageJSON.version} environment info`,\n    }\n  );\n}\n\nasync function actionAsync(projectRoot: string): Promise<void> {\n  const info = await getEnvironmentInfoAsync();\n  const workflow = getDefaultTarget(projectRoot ?? process.cwd());\n  const lines = info.split('\\n');\n  lines.pop();\n  lines.push(`    Expo Workflow: ${workflow}`);\n  log(lines.join('\\n') + '\\n');\n}\n\nexport default function (program: Command) {\n  program\n    .command('diagnostics [path]')\n    .description('Log environment info to the console')\n    .helpGroup('info')\n    .asyncAction(actionAsync);\n}\n"],"file":"diagnostics.js"}